{% extends 'base.html' %}
{% load bootstrap4 %}

{% block content %}
  <button class="btn btn-info" data-toggle="collapse" data-target="#collapseFilter"
          aria-expanded="false" aria-controls="collapseFilter">
    <i class="fas fa-filter"></i> Filtros
  </button>

  <form class="collapse mt-2" id="collapseFilter">
    {% bootstrap_form filter.form %}
    <button type="submit" class="btn btn-primary">
      <i class="fas fa-filter"></i> Filtrar
    </button>
  </form>

  <hr>

  <div class="table-responsive">
    <table class="table table-striped table-hover table-sm">
      <thead class="thead-dark">
        <tr>
          <th>Valor</th>
          <th>Data</th>
          <th>Categoria</th>
          <th>Conta</th>
          <th>Descrição</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody>
        {% for object in object_list %}
          <tr>
            <td class="{{ class_text }}">R$ {{ object.value }}</td>
            <td>{{ object.date|date:"d/m/Y" }}</td>
            <td>
              <span class="px-2 mr-1" style="background-color: {{ object.category.color }}"></span>
              {{ object.category.name }}
            </td>
            <td>{{ object.bill }}</td>
            <td>{{ object.description }}</td>
            <td>
              <form method="post" action="{% url 'core:record-delete' object.id %}"
                    onclick="return confirm('Deseja realmente excluir este item?');">
                {% csrf_token %}
                <button class="btn btn-danger btn-sm">
                  <i class="far fa-trash-alt"></i>
                </button>
              </form>
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="6">Nenhum registro salvo.</td>
          </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
          <th colspan="5" class="{{ class_text }}">R$ {{ total|floatformat:2 }}</th>
        </tr>
      </tfoot>
    </table>
  </div>
{% endblock %}